<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Music Video Jukebox</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #000;
    color: #fff;
    text-align: center;
  }
  #player {
    margin: 10px auto;
    max-width: 100%;
  }
  input {
    width: 65%;
    padding: 8px;
    margin-top: 10px;
  }
  button {
    padding: 8px 12px;
    margin-left: 5px;
    cursor: pointer;
  }
  .results, ul {
    list-style: none;
    padding: 0;
    max-width: 800px;
    margin: 10px auto;
  }
  li {
    display: flex;
    align-items: center;
    padding: 8px;
    border-bottom: 1px solid #333;
  }
  img {
    width: 120px;
    margin-right: 10px;
  }
  .title {
    flex-grow: 1;
    text-align: left;
  }
</style>
</head>

<body>

<h2>ðŸŽ¶ Music Video Jukebox</h2>

<!-- Player container -->
<div id="player"></div>

<input id="searchInput" placeholder="Search for a music video">
<button onclick="search()">Search</button>

<ul class="results" id="results"></ul>

<h3>Up Next</h3>
<ul id="queue"></ul>

<script src="https://www.youtube.com/iframe_api"></script>

<script>
const API_KEY = "AIzaSyCFI__LFEbvmy7aULYvNRvr37rdAVasDHU";

let player;
let videoQueue = [];

function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '390',
    width: '640',
    playerVars: {
      fs: 1,                 // âœ… ENABLE FULLSCREEN
      rel: 0,
      modestbranding: 1
    },
    events: {
      'onStateChange': onPlayerStateChange
    }
  });
}

function search() {
  const query = document.getElementById('searchInput').value;
  fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoCategoryId=10&maxResults=5&q=${encodeURIComponent(query)}&key=${API_KEY}`)
    .then(res => res.json())
    .then(data => renderResults(data.items));
}

function renderResults(items) {
  const results = document.getElementById('results');
  results.innerHTML = '';

  items.forEach(item => {
    const li = document.createElement('li');
    li.innerHTML = `
      <img src="${item.snippet.thumbnails.medium.url}">
      <div class="title">${item.snippet.title}</div>
      <button onclick="addToQueue('${item.id.videoId}')">Add</button>
    `;
    results.appendChild(li);
  });
}

function addToQueue(videoId) {
  videoQueue.push(videoId);
  renderQueue();

  if (player.getPlayerState() !== YT.PlayerState.PLAYING) {
    playNext();
  }
}

function playNext() {
  if (videoQueue.length === 0) return;
  const next = videoQueue.shift();
  player.loadVideoById(next);
  renderQueue();
}

function onPlayerStateChange(event) {
  if (event.data === YT.PlayerState.ENDED) {
    playNext();
  }
}

function renderQueue() {
  const list = document.getElementById('queue');
  list.innerHTML = '';
  videoQueue.forEach((id, i) => {
    const li = document.createElement('li');
    li.textContent = `${i + 1}. ${id}`;
    list.appendChild(li);
  });
}
</script>

</body>
</html>
